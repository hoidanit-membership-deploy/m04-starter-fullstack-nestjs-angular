<!--
  Author: Hỏi Dân IT - @hoidanit

  This source code is developed for the course
  "Deploy Siêu Tốc".
  It is intended for educational purposes only.
  Unauthorized distribution, reproduction, or modification is strictly prohibited.

  Copyright (c) 2026 Hỏi Dân IT. All Rights Reserved.
-->

<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 p-4">
  <div class="max-w-md w-full">
    <!-- Logo -->
    <a routerLink="/" class="flex items-center justify-center gap-2 mb-8">
      <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
        </svg>
      </div>
      <span class="text-2xl font-bold text-white">TodoApp</span>
    </a>

    <!-- Form Card -->
    <div class="bg-white/10 backdrop-blur-lg rounded-2xl border border-white/10 p-8">
      <h2 class="text-2xl font-bold text-center text-white mb-8">
        Đăng Nhập
      </h2>

      @if (error()) {
        <div class="flex items-center gap-3 bg-red-500/20 border border-red-500/30 text-red-200 px-4 py-3 rounded-xl mb-6">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span class="text-sm">{{ error() }}</span>
        </div>
      }

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="mb-5">
          <label for="email" class="block text-white/80 text-sm font-medium mb-2">
            Email
          </label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            placeholder="Nhập email của bạn"
          />
          @if (loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
            <p class="text-red-300 text-xs mt-2">Email không hợp lệ</p>
          }
        </div>

        <div class="mb-6">
          <label for="password" class="block text-white/80 text-sm font-medium mb-2">
            Mật khẩu
          </label>
          <input
            type="password"
            id="password"
            formControlName="password"
            class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
            placeholder="Nhập mật khẩu"
          />
          @if (loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
            <p class="text-red-300 text-xs mt-2">Mật khẩu phải có ít nhất 6 ký tự</p>
          }
        </div>

        <button
          type="submit"
          [disabled]="loading() || loginForm.invalid"
          class="w-full py-3 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-xl hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-indigo-500/30"
        >
          @if (loading()) {
            <span class="flex items-center justify-center gap-2">
              <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              Đang đăng nhập...
            </span>
          } @else {
            <span>Đăng Nhập</span>
          }
        </button>
      </form>

      <p class="mt-6 text-center text-white/60">
        Chưa có tài khoản?
        <a routerLink="/auth/register" class="text-indigo-300 hover:text-white transition-colors">
          Đăng ký ngay
        </a>
      </p>
    </div>
  </div>
</div>
